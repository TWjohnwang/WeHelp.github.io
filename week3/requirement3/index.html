<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta charset="utf-8" />
    <title>Assignment - Week 1</title>
    <link rel="stylesheet" type="text/css" href="layout.css" />
  </head>
  <body>
    <script>
      let data;
      let url =
        "https://padax.github.io/taipei-day-trip-resources/taipei-attractions-assignment.json";
      function getData() {
        return fetch((url = url))
          .then(function (response) {
            return response.json();
          })
          .then((req) => {
            return req.result.results;
          })
          .catch((err) => {
            console.log("fetch failed:", err);
          });
      }
      const main = () => {
        getData().then((data) => {
          for (let index in data) {
            attractionPhoto = data[index].file.substr(
              0,
              data[index].file.search(/jpg/i) + 3
            );
            attractionName = data[index].stitle;
            if (index < 2) {
              let photo = document.createElement("img");
              photo.setAttribute("src", attractionPhoto);
              photo.setAttribute("width", "80px");
              photo.setAttribute("height", "100%");
              document
                .getElementsByClassName("promotion")
                [index].appendChild(photo);
              let attraction = document.createElement("div");
              attraction.className = "text";
              attraction.textContent = attractionName;
              document
                .getElementsByClassName("promotion")
                [index].appendChild(attraction);
            } else if (index < 10) {
              let photo = document.createElement("img");
              photo.setAttribute("src", attractionPhoto);
              photo.setAttribute("width", "100%");
              photo.setAttribute("height", "206px");
              appendPhoto = document.getElementsByClassName("frame")[index - 2];
              appendPhoto.appendChild(photo);
              let title = document.createElement("div");
              title.className = "title";
              title.textContent = attractionName;
              appendTitle = document.getElementsByClassName("frame")[index - 2];
              appendTitle.appendChild(title);
            }
          }
        });
      };
      main();
    </script>
    <div class="heading">
      <div class="left">My Website</div>
      <div class="right">
        <div class="item">Item1</div>
        <div class="item">Item2</div>
        <div class="item">Item3</div>
        <div class="item">Item4</div>
      </div>
      <div class="right1">
        <img src="/week1/img/more.png" alt="hamburger menu" />
      </div>
    </div>
    <div class="home">Welcome to MyHome</div>
    <div class="container">
      <div class="promotion"></div>
      <div class="promotion"></div>
      <div class="frame"></div>
      <div class="frame"></div>
      <div class="frame"></div>
      <div class="frame"></div>
      <div class="frame"></div>
      <div class="frame"></div>
      <div class="frame"></div>
      <div class="frame"></div>
    </div>
  </body>
</html>
